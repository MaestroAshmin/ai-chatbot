<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Socket.io Chat Example</title>
</head>
<body>
<ul id="messages"></ul>
<form id="chat-form">
    <input id="message-input" autocomplete="off"/>
    <button>Send</button>
</form>
<script type="module">
  import {io} from "https://cdn.socket.io/4.4.1/socket.io.esm.min.js";
  // Connect to the server at localhost 8080
  const socket = io('http://localhost:8080');

  // When a message is received from the server
  socket.on('chat message', (msg) => {
    const li = document.createElement('li');
    li.innerText = msg;
    document.querySelector('#messages').appendChild(li);
  });

  // When the chat form is submitted
  document.querySelector('#chat-form').addEventListener('submit', (e) => {
    e.preventDefault();
    const input = document.querySelector('#message-input');
    const msg = input.value;
    input.value = '';
    socket.emit('chat message', msg);
  });
</script>
</body>
</html>
